import React,{useState,useEffect,useCallback}from "react";import Link from "next/link";import CategoriesJson from '../public/data/categories.json';import styles from '../styles/CategoriesBar.module.css';import{debounce}from 'lodash';const CategoriesBar=({isVisible})=>{const[categories]=useState(CategoriesJson);const[error]=useState(null);const[isSticky,setIsSticky]=useState(!1);const handleScroll=useCallback(debounce(()=>{if(window.scrollY>140){setIsSticky(!0)}else{setIsSticky(!1)}},10),[]);useEffect(()=>{window.addEventListener('scroll',handleScroll);return()=>{window.removeEventListener('scroll',handleScroll)}},[handleScroll]);if(error){return<div>Error:{error}</div>}
return(<div className={`${styles.CategoriesBar} ${isSticky ? styles.sticky : ''} ${isVisible ? styles.visible : styles.hidden}`}><div className={styles.CategoriesBarContentBox}><span className={styles.CategoriesBarTitle}>All Categories</span><div className={styles.CategoriesList}>{categories.map((category,key)=>(<Link className={styles.CategoryItem}href={category.CategoryPath}key={key}>{category.title}</Link>))}</div><div className={styles.Separator}></div><div className={styles.CategoriesBarNavMenu}><Link href="/contact">Contact</Link><Link href="/about">About</Link></div></div></div>)};export default CategoriesBar